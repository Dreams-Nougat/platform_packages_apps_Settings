Revision: 13bb1b3756306ac230a2e139ec7bf52e6e8593a4
Patch-set: 1
File: src/com/android/settings/inputmethod/UserDictionaryList.java

56
Thu Apr 18 03:31:38 2013 +0000
Author: Jean Chalard <1015428@85c56323-6fa9-3386-8a01-6480fb634889>
UUID: TfkfkUDM
Bytes: 393
I am perplex at this. The user dictionary is a fundamental part of the system and it *must* contain a LOCALE column as far as I'm aware; I don't see how the bug that you are trying to fix could happen on a compliant device. If the device does not have a LOCALE column in the user dictionary, it won't work as expected with most IMEs and should be fixed.

In which cases do you see this happen?

56
Thu Apr 18 04:48:46 2013 +0000
Author: Yoohyun Choi <1020248@85c56323-6fa9-3386-8a01-6480fb634889>
Parent: TfkfkUDM
UUID: ThaNvnsQ
Bytes: 328
Of course I haven't seen this case in the user dictionary.
As I know, this is only happened by programming mistakes(when the wrong(or not exist) column is explicitly specified).
But if the columnIndex is -1, cusor.getString(columnIndex) makes IllegalStatementException.
So, I think this is must be checked -1 or not like cursor.

56
Thu Apr 18 10:15:31 2013 +0000
Author: Jean Chalard <1015428@85c56323-6fa9-3386-8a01-6480fb634889>
Parent: ThaNvnsQ
UUID: Tfueg3DM
Bytes: 603
All right, I see what you mean.

However, I fear this may mask a possible bug. Many IMEs already rely on this column; if for some reason a device in development has this broken, and the settings application does not crash, it makes it more likely that the bug goes unnoticed with disastrous results.

Besides, a user dictionary without a locale column would be completely useless. To some extent, I think crashing if this happens is the right course of action.

And furthermore, if the settings application just returns null here, it's going to crash later when it tries to read individual words anyway.

